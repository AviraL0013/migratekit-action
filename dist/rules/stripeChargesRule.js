"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.stripeChargesRule = void 0;
const stripeScanner_1 = require("../scanners/stripeScanner");
const stripeChargesMigrator_1 = require("../migrators/stripeChargesMigrator");
exports.stripeChargesRule = {
    id: "stripe-charges",
    description: "Migrate stripe.charges.create to paymentIntents",
    async scan(root) {
        return (0, stripeScanner_1.scanStripeCharges)(root);
    },
    async migrate(findings) {
        if (findings.length === 0)
            return false;
        await (0, stripeChargesMigrator_1.migrateStripeCharges)(findings);
        return true;
    },
    pr: {
        branch: "migratekit/stripe-charges",
        title: "Migrate Stripe Charges to Payment Intents",
        body: "This PR was automatically generated by MigrateKit.\n\n" +
            "Changes:\n" +
            "- Replaced stripe.charges.create with stripe.paymentIntents.create\n\n" +
            "⚠️ Manual review required for payment flow behavior.",
        humanReviewNotes: "Verify confirmation flows, webhooks, and client secret handling."
    }
};
